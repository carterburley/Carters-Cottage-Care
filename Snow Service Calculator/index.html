<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Cottage Care — Snow Service Calculator</title>
<style>
  body{
    font:16px/1.4 system-ui,Segoe UI,Roboto,Arial;
    margin:0;
    background:#ffffff;
    color:#0f1220;
  }
  .wrap{max-width:560px;margin:40px auto;padding:16px}
  .card{
    background:#161a2b;
    border:1px solid rgba(255,255,255,.08);
    border-radius:14px;
    padding:18px;
    color:#e9ecf5;
  }
  h1{margin:0 0 8px;font-size:20px}
  .muted{color:#94a0c2;font-size:13px}
  label{display:block;margin:14px 0 6px;color:#b9c4e6;font-size:14px}
  select,input{
    width:100%;
    padding:12px 14px;
    border-radius:10px;
    border:1px solid rgba(255,255,255,.12);
    background:#0e1433;
    color:#e9ecf5;
  }
  .service-buttons{
    display:flex;
    gap:8px;
    margin:12px 0;
  }
  .service-buttons button{
    flex:1;
    padding:10px;
    border:none;
    border-radius:8px;
    font-weight:bold;
    cursor:pointer;
    background:#2a3150;
    color:#e9ecf5;
    transition:background 0.2s;
  }
  .service-buttons button.active{
    background:linear-gradient(135deg,#77a0ff,#47d18c);
    color:#0a0e1d;
  }
  .actions{display:flex;gap:10px;margin-top:12px}
  button{
    background:linear-gradient(135deg,#77a0ff,#47d18c);
    color:#0a0e1d;
    border:none;
    border-radius:10px;
    padding:10px 14px;
    font-weight:700;
    cursor:pointer
  }
  .result{
    margin-top:16px;
    padding:14px;
    border-radius:12px;
    background:#10162e;
    border:1px solid rgba(255,255,255,.08);
    color:#e9ecf5;
  }
  .bad{color:#ff6b6b}
  .ok{color:#47d18c;font-weight:800;font-size:26px}
  small{color:#94a0c2}
</style>
</head>
<body>
<div class="wrap">
  <div class="card">
    <h1>Cottage Care — Snow Service Calculator</h1>
    <div class="muted">Located at:</div>

    <!-- Base rate -->
    <label>Base rate <small>(&le;10 km, Same day, 1 lane, &le;100 ft, Path shoveling, Path salting, and &le;12in depth)</small></label>
    <select disabled>
      <option>$100 CAD</option>
    </select>
	
	<!-- Distance -->
    <label>Distance from </label>
    <select id="distance">
      <option value="" selected disabled>Select...</option>
      <option value="lt10">&lt;10 km</option>
      <option value="lt20">&lt;20 km</option>
      <option value="lt30">&lt;30 km</option>
      <option value="gt30">&gt;30 km</option>
    </select>
    <div id="unavailable" class="result bad" style="display:none">Call For Availability (&gt;30 km).</div>
	
    <!-- Service type buttons -->
    <div class="service-buttons">
      <button data-mult="2">Emergency Service</button>
      <button data-mult="1" class="active">Same Day Service</button>
      <button data-mult="5">Seasonal Service</button>
    </div>

    <!-- Lanes -->
    <label>Number of lanes</label>
    <select id="lanes">
      <option value="" selected disabled>Select...</option>
      <option value="1">1 lane</option>
      <option value="2">2 lanes</option>
    </select>

    <!-- Driveway length -->
    <label>Driveway length</label>
    <select id="length">
      <option value="" selected disabled>Select...</option>
      <option value="lt100">&lt;100 ft</option>
      <option value="lt200">&lt;200 ft</option>
      <option value="lt300">&lt;300 ft</option>
      <option value="lt400">&lt;400 ft</option>
      <option value="lt500">&lt;500 ft</option>
      <option value="lt600">&lt;600 ft</option>
      <option value="lt700">&lt;700 ft</option>
      <option value="lt800">&lt;800 ft</option>
      <option value="gt800">&gt;800 ft</option>
    </select>
    <div id="long" class="result bad" style="display:none">Call For Availability (&gt;800 ft).</div>

    <!-- Paths -->
    <label>Paths</label>
    <select id="paths">
      <option value="" selected disabled>Select...</option>
      <option value="none">No shoveling & no salt (20% discount)</option>
      <option value="shovel_only">Shoveling & no salt (10% discount)</option>
      <option value="shovel_salt">Shoveling & salt (1×)</option>
    </select>

    <!-- Snow depth -->
    <label>Snow depth</label>
    <select id="depth">
      <option value="" selected disabled>Select...</option>
      <option value="le12">&lt; 12 in</option>
      <option value="ge12">&gt; 12 in</option>
    </select>
    <div id="deep" class="result bad" style="display:none">Call For Availability (≥12 in).</div>

    <div class="actions">
      <button id="calc">Calculate</button>
      <button id="reset">Reset</button>
    </div>

    <div id="quote" class="result" style="display:none">
      <div class="ok" id="price">$0 CAD</div>
      <div id="explain"></div>
      <small id="policy">All quotes are estimates; final price confirmed on site.</small>
    </div>
  </div>
</div>

<script>
// Pricing config
const MULT_DISTANCE = { lt10:1.0, lt20:1.5, lt30:2.0 };
const MULT_LENGTH   = { lt100:1.00, lt200:1.15, lt300:1.30, lt400:1.45, lt500:1.60, lt600:1.85, lt700:2.20, lt800:2.50 };
const EXTRA_PER_100FT = 60; // kept (unused now) to avoid touching other lines
const MULT_LANES   = { "1":1.00, "2":1.35 };
const MULT_PATHS   = { none:0.80, shovel_only:0.90, shovel_salt:1.00 };
const MULT_DEPTH   = { le12:1.00 };
const PATHS_LABELS = {
  none: 'No shoveling & no salt (−20%)',
  shovel_only: 'Shoveling & no salt (−10%)',
  shovel_salt: 'Shoveling & salt (1×)'
};
const ROUND_TO     = 5;

let serviceMult = 1;

const $ = id => document.getElementById(id);
const roundTo = (n, step) => Math.round(n/step)*step;
const format = n => `$${n.toFixed(0)} CAD`;

// Service buttons
document.querySelectorAll('.service-buttons button').forEach(btn => {
  btn.addEventListener('click', () => {
    document.querySelectorAll('.service-buttons button').forEach(b => b.classList.remove('active'));
    btn.classList.add('active');
    serviceMult = Number(btn.getAttribute('data-mult'));
  });
});

// Availability warnings
$('distance').onchange = () => {
  $('unavailable').style.display = ($('distance').value === 'gt30') ? 'block' : 'none';
};
$('length').onchange = () => {
  const over = ($('length').value === 'gt800');
  $('long').style.display = over ? 'block' : 'none';
  if (over) $('quote').style.display = 'none';
};
$('depth').onchange = () => {
  $('deep').style.display = ($('depth').value === 'ge12') ? 'block' : 'none';
  if ($('depth').value === 'ge12') $('quote').style.display = 'none';
};

$('calc').onclick = () => {
  const base = 100;
  const distVal = $('distance').value;
  const mDist = MULT_DISTANCE[distVal] ?? null;
  if (!mDist){ return; }

  // Block if >800 ft
  const lenVal = $('length').value;
  if (!lenVal){ return; }
  if (lenVal === 'gt800'){
    $('long').style.display = 'block';
    $('quote').style.display = 'none';
    return;
  }

  // Depth gate
  const depthVal = $('depth').value;
  if (!depthVal){ return; }
  if (depthVal === 'ge12'){
    $('deep').style.display = 'block';
    $('quote').style.display = 'none';
    return;
  }
  const mDepth = MULT_DEPTH[depthVal] || 1.0;

  // Length multiplier + label
  let mLen = MULT_LENGTH[lenVal] || 1;
  const lenLabel = $('length').options[$('length').selectedIndex]?.text || '';

  const mLanes = MULT_LANES[$('lanes').value] || 1;

  const pathsKey = $('paths').value;
  const mPaths = MULT_PATHS[pathsKey] ?? null;
  if (!mPaths){ return; }

  let raw = ((base * mDist * mLen * mLanes) * serviceMult) * mPaths * mDepth;
  let finalPrice = roundTo(raw, ROUND_TO);

  $('price').textContent = format(finalPrice);
  const pathsText = PATHS_LABELS[pathsKey] || '';
  $('explain').innerHTML = `
  <small>
    Base ${format(base)} × distance ${mDist} × service ${serviceMult} × lanes ${mLanes} × length ${mLen} × paths ${mPaths} × depth ${mDepth}
  </small>
  `;
  $('quote').style.display = 'block';
};

$('reset').onclick = () => {
  ['distance','length','lanes','paths','depth'].forEach(id => {
    const el = $(id);
    if (el) el.selectedIndex = 0;
  });
  $('unavailable').style.display = 'none';
  $('long').style.display = 'none';
  $('deep').style.display = 'none';
  $('quote').style.display = 'none';
  serviceMult = 1;
  document.querySelectorAll('.service-buttons button').forEach(b => b.classList.remove('active'));
  document.querySelector('.service-buttons button[data-mult="1"]').classList.add('active');
};
</script>
</body>
</html>


